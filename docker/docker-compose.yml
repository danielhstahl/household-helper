services:
  app:
    image: ghcr.io/danielhstahl/householdhelper-draid:v0.4.1
    container_name: app
    environment:
      INIT_ADMIN_PASSWORD: [yourpassword]
      OPEN_AI_COMPATABLE_ENDPOINT: http://[yourllmip]:8100/ai/llm
      JWT_SECRET: [yourjwtsecret]
      PSQL_DATABASE_URL: "postgresql://[yourpsqluser]:[yourpsqlpassword]@psqldb:5432/draid"
      PORT: 8000
      ADDRESS: 0.0.0.0
      KNOWLEDGE_BASE_ENDPOINT: "http://127.0.0.1:8000"
      HOSTNAME: "yourfinalhostname, used for swagger"

  ui:
    image: ghcr.io/danielhstahl/householdhelper-ui:v0.4.1
    environment:
      BACKEND_SERVICE: app:8000
    # for exposing outside the container network
    ports:
      - "8002:8000"

  psqldb:
    image: pgvector/pgvector:0.8.0-pg17-trixie
    container_name: psqldb
    environment:
      POSTGRES_PASSWORD: [yourpsqlpassword]
      POSTGRES_USER: [yourpsqluser]
    volumes:
      - "/volume1/docker/postgres:/var/lib/postgresql/data/"

volumes:
  psqldb:
